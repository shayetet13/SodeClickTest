# р╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╕кр╕┤р╕Чр╕Шр╕┤р╣М Platinum/Diamond р╣Бр╕ер╕░р╕Бр╕▓р╕гр╣Бр╕кр╕Фр╕Зр╕Др╕Щр╕нр╕нр╕Щр╣Др╕ер╕Щр╣М

## ЁЯОп р╕Яр╕╡р╣Ар╕Ир╕нр╕гр╣Мр╕Чр╕╡р╣Ир╣Ар╕Юр╕┤р╣Ир╕б

### тЬЕ 1. р╕кр╕┤р╕Чр╕Шр╕┤р╣Мр╕Бр╕▓р╕гр╕кр╕гр╣Йр╕▓р╕Зр╕лр╣Йр╕нр╕Зр╣Бр╕Кр╕Чр╕кр╣Ир╕зр╕Щр╕Хр╕▒р╕з
- **Platinum р╣Бр╕ер╕░ Diamond** р╕кр╕▓р╕бр╕▓р╕гр╕Цр╕кр╕гр╣Йр╕▓р╕Зр╕лр╣Йр╕нр╕Зр╣Бр╕Кр╕Чр╕кр╣Ир╕зр╕Щр╕Хр╕▒р╕зр╣Др╕Фр╣Йр╣Др╕бр╣Ир╕Ир╕│р╕Бр╕▒р╕Фр╕Др╕Щ
- **Tier р╕нр╕╖р╣Ир╕Щр╣Ж** р╣Др╕бр╣Ир╕кр╕▓р╕бр╕▓р╕гр╕Цр╕кр╕гр╣Йр╕▓р╕Зр╕лр╣Йр╕нр╕Зр╣Бр╕Кр╕Чр╕кр╣Ир╕зр╕Щр╕Хр╕▒р╕зр╣Др╕Фр╣Й

### тЬЕ 2. р╕Бр╕▓р╕гр╣Бр╕кр╕Фр╕Зр╕Др╕Щр╕нр╕нр╕Щр╣Др╕ер╕Щр╣Мр╣Гр╕Щр╕гр╕▓р╕вр╕Бр╕▓р╕гр╕лр╣Йр╕нр╕Зр╣Бр╕Кр╕Ч
- р╣Бр╕кр╕Фр╕Зр╕Ир╕│р╕Щр╕зр╕Щр╕Др╕Щр╕нр╕нр╕Щр╣Др╕ер╕Щр╣Мр╕Вр╣Йр╕▓р╕Зр╣Ж р╕лр╣Йр╕нр╕Зр╣Бр╕Кр╕Ч
- р╣Гр╕Кр╣Йр╕кр╕╡р╣Ар╕Вр╕╡р╕вр╕зр╕Чр╕╡р╣Ир╕Хр╕▒р╕Фр╕Бр╕▒р╕Ър╕Юр╕╖р╣Йр╕Щр╕лр╕ер╕▒р╕З
- р╕бр╕╡ animation pulse р╕кр╕│р╕лр╕гр╕▒р╕Ър╕Ир╕╕р╕Фр╕кр╕╡р╣Ар╕Вр╕╡р╕вр╕з

## ЁЯФз р╕Бр╕▓р╕гр╣Бр╕Бр╣Йр╣Др╕Вр╕Чр╕╡р╣Ир╕Чр╕│

### 1. Backend - р╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╕кр╕┤р╕Чр╕Шр╕┤р╣Мр╕Бр╕▓р╕гр╕кр╕гр╣Йр╕▓р╕Зр╕лр╣Йр╕нр╕Зр╕кр╣Ир╕зр╕Щр╕Хр╕▒р╕з (User.js)

#### р╣Ар╕Юр╕┤р╣Ир╕бр╕кр╕┤р╕Чр╕Шр╕┤р╣Мр╣Гр╕лр╣Й Platinum р╣Бр╕ер╕░ Diamond:
```javascript
diamond: {
  dailyChats: 500,
  dailyImages: -1, // unlimited
  dailyVideos: -1, // unlimited
  dailyBonus: 50000,
  spinInterval: 20 * 60 * 1000, // 20 minutes
  canTransferCoins: true,
  canHideOnlineStatus: true,
  chatRoomLimit: -1, // unlimited
  canCreatePrivateRooms: true,        // тЬЕ р╣Ар╕Юр╕┤р╣Ир╕бр╕кр╕┤р╕Чр╕Шр╕┤р╣М
  privateRoomMemberLimit: -1          // тЬЕ р╣Др╕бр╣Ир╕Ир╕│р╕Бр╕▒р╕Фр╕Др╕Щ
},
platinum: {
  dailyChats: -1, // unlimited
  dailyImages: -1, // unlimited
  dailyVideos: -1, // unlimited
  dailyBonus: 100000,
  spinInterval: 10 * 60 * 1000, // 10 minutes
  canTransferCoins: true,
  canHideOnlineStatus: true,
  chatRoomLimit: -1, // unlimited
  canCreatePrivateRooms: true,        // тЬЕ р╣Ар╕Юр╕┤р╣Ир╕бр╕кр╕┤р╕Чр╕Шр╕┤р╣М
  privateRoomMemberLimit: -1          // тЬЕ р╣Др╕бр╣Ир╕Ир╕│р╕Бр╕▒р╕Фр╕Др╕Щ
}
```

#### р╕Бр╕│р╕лр╕Щр╕Фр╕кр╕┤р╕Чр╕Шр╕┤р╣Мр╣Гр╕лр╣Й Tier р╕нр╕╖р╣Ир╕Щр╣Ж:
```javascript
// р╕Чр╕╕р╕Б tier р╕нр╕╖р╣Ир╕Щр╣Ж (member, silver, gold, vip, vip1, vip2)
canCreatePrivateRooms: false,
privateRoomMemberLimit: 0
```

### 2. Frontend - р╣Бр╕кр╕Фр╕Зр╕Др╕Щр╕нр╕нр╕Щр╣Др╕ер╕Щр╣Мр╣Гр╕Щр╕гр╕▓р╕вр╕Бр╕▓р╕гр╕лр╣Йр╕нр╕Зр╣Бр╕Кр╕Ч (ChatRoomList.jsx)

#### р╣Ар╕Юр╕┤р╣Ир╕б State р╕кр╕│р╕лр╕гр╕▒р╕Ър╣Ар╕Бр╣Зр╕Ър╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Др╕Щр╕нр╕нр╕Щр╣Др╕ер╕Щр╣М:
```javascript
const [onlineUsers, setOnlineUsers] = useState({}); // roomId -> onlineCount
```

#### р╣Ар╕Юр╕┤р╣Ир╕бр╕Яр╕▒р╕Зр╕Бр╣Мр╕Кр╕▒р╕Щр╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Др╕Щр╕нр╕нр╕Щр╣Др╕ер╕Щр╣М:
```javascript
const fetchOnlineUsers = async () => {
  try {
    const onlineData = {};
    
    // р╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Др╕Щр╕нр╕нр╕Щр╣Др╕ер╕Щр╣Мр╕кр╕│р╕лр╕гр╕▒р╕Ър╕Чр╕╕р╕Бр╕лр╣Йр╕нр╕З
    for (const room of chatRooms) {
      try {
        const response = await fetch(
          `${import.meta.env.VITE_API_URL || 'http://localhost:5000'}/api/chatroom/${room.id}/online-users?userId=${currentUser._id}`,
          {
            credentials: 'include'
          }
        );
        const data = await response.json();
        
        if (data.success) {
          onlineData[room.id] = data.data.onlineCount;
        } else {
          onlineData[room.id] = 0;
        }
      } catch (error) {
        console.error(`Error fetching online users for room ${room.id}:`, error);
        onlineData[room.id] = 0;
      }
    }
    
    setOnlineUsers(onlineData);
  } catch (error) {
    console.error('Error fetching online users:', error);
  }
};
```

#### р╣Ар╕Юр╕┤р╣Ир╕бр╕Бр╕▓р╕гр╣Бр╕кр╕Фр╕Зр╕Др╕Щр╕нр╕нр╕Щр╣Др╕ер╕Щр╣Мр╣Гр╕Щ UI:
```javascript
<div className="flex items-center space-x-1">
  <div className="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
  <span className="text-green-600 font-medium">{onlineUsers[room.id] || 0} р╕нр╕нр╕Щр╣Др╕ер╕Щр╣М</span>
</div>
```

## ЁЯОп р╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣М

### тЬЕ р╕лр╕ер╕▒р╕Зр╕Бр╕▓р╕гр╣Бр╕Бр╣Йр╣Др╕В:

#### 1. р╕кр╕┤р╕Чр╕Шр╕┤р╣Мр╕Бр╕▓р╕гр╕кр╕гр╣Йр╕▓р╕Зр╕лр╣Йр╕нр╕Зр╕кр╣Ир╕зр╕Щр╕Хр╕▒р╕з:
- **Platinum:** тЬЕ р╕кр╕▓р╕бр╕▓р╕гр╕Цр╕кр╕гр╣Йр╕▓р╕Зр╕лр╣Йр╕нр╕Зр╕кр╣Ир╕зр╕Щр╕Хр╕▒р╕зр╣Др╕Фр╣Йр╣Др╕бр╣Ир╕Ир╕│р╕Бр╕▒р╕Фр╕Др╕Щ
- **Diamond:** тЬЕ р╕кр╕▓р╕бр╕▓р╕гр╕Цр╕кр╕гр╣Йр╕▓р╕Зр╕лр╣Йр╕нр╕Зр╕кр╣Ир╕зр╕Щр╕Хр╕▒р╕зр╣Др╕Фр╣Йр╣Др╕бр╣Ир╕Ир╕│р╕Бр╕▒р╕Фр╕Др╕Щ
- **Tier р╕нр╕╖р╣Ир╕Щр╣Ж:** тЭМ р╣Др╕бр╣Ир╕кр╕▓р╕бр╕▓р╕гр╕Цр╕кр╕гр╣Йр╕▓р╕Зр╕лр╣Йр╕нр╕Зр╕кр╣Ир╕зр╕Щр╕Хр╕▒р╕зр╣Др╕Фр╣Й

#### 2. р╕Бр╕▓р╕гр╣Бр╕кр╕Фр╕Зр╕Др╕Щр╕нр╕нр╕Щр╣Др╕ер╕Щр╣М:
- **р╕кр╕╡р╣Ар╕Вр╕╡р╕вр╕з:** р╣Гр╕Кр╣Й `bg-green-500` р╣Бр╕ер╕░ `text-green-600` р╕Чр╕╡р╣Ир╕Хр╕▒р╕Фр╕Бр╕▒р╕Ър╕Юр╕╖р╣Йр╕Щр╕лр╕ер╕▒р╕З
- **Animation:** р╕Ир╕╕р╕Фр╕кр╕╡р╣Ар╕Вр╕╡р╕вр╕зр╕бр╕╡ `animate-pulse` effect
- **р╕Хр╕│р╣Бр╕лр╕Щр╣Ир╕З:** р╣Бр╕кр╕Фр╕Зр╕гр╕░р╕лр╕зр╣Ир╕▓р╕Зр╕Ир╕│р╕Щр╕зр╕Щр╕кр╕бр╕▓р╕Кр╕┤р╕Бр╣Бр╕ер╕░р╕Ир╕│р╕Щр╕зр╕Щр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕б
- **Real-time:** р╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Др╕Щр╕нр╕нр╕Щр╣Др╕ер╕Щр╣Мр╣Ар╕бр╕╖р╣Ир╕нр╣Вр╕лр╕ер╕Фр╕гр╕▓р╕вр╕Бр╕▓р╕гр╕лр╣Йр╕нр╕Зр╣Бр╕Кр╕Ч

### ЁЯФз р╕Бр╕▓р╕гр╕Чр╕│р╕Зр╕▓р╕Щ:
1. **р╣Ар╕бр╕╖р╣Ир╕нр╣Вр╕лр╕ер╕Фр╕гр╕▓р╕вр╕Бр╕▓р╕гр╕лр╣Йр╕нр╕Зр╣Бр╕Кр╕Ч:** р╕гр╕░р╕Ър╕Ър╕Ир╕░р╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Др╕Щр╕нр╕нр╕Щр╣Др╕ер╕Щр╣Мр╕кр╕│р╕лр╕гр╕▒р╕Ър╕Чр╕╕р╕Бр╕лр╣Йр╕нр╕З
2. **р╣Бр╕кр╕Фр╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕е:** р╣Бр╕кр╕Фр╕Зр╕Ир╕│р╕Щр╕зр╕Щр╕Др╕Щр╕нр╕нр╕Щр╣Др╕ер╕Щр╣Мр╕Юр╕гр╣Йр╕нр╕бр╕Ир╕╕р╕Фр╕кр╕╡р╣Ар╕Вр╕╡р╕вр╕зр╕Чр╕╡р╣Ир╕бр╕╡ animation
3. **р╕кр╕┤р╕Чр╕Шр╕┤р╣Мр╕Бр╕▓р╕гр╕кр╕гр╣Йр╕▓р╕Зр╕лр╣Йр╕нр╕З:** р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ tier р╕Вр╕нр╕Зр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╣Ар╕Юр╕╖р╣Ир╕нр╕Бр╕│р╕лр╕Щр╕Фр╕кр╕┤р╕Чр╕Шр╕┤р╣Мр╕Бр╕▓р╕гр╕кр╕гр╣Йр╕▓р╕Зр╕лр╣Йр╕нр╕Зр╕кр╣Ир╕зр╕Щр╕Хр╕▒р╕з
4. **Error Handling:** р╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╕Бр╕гр╕Ур╕╡р╕Чр╕╡р╣Ир╣Др╕бр╣Ир╕кр╕▓р╕бр╕▓р╕гр╕Цр╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Др╕Щр╕нр╕нр╕Щр╣Др╕ер╕Щр╣Мр╣Др╕Фр╣Й

## ЁЯУБ р╣Др╕Яр╕ер╣Мр╕Чр╕╡р╣Ир╣Бр╕Бр╣Йр╣Др╕В

### Backend:
- `backend/models/User.js` - р╣Ар╕Юр╕┤р╣Ир╕бр╕кр╕┤р╕Чр╕Шр╕┤р╣Мр╕Бр╕▓р╕гр╕кр╕гр╣Йр╕▓р╕Зр╕лр╣Йр╕нр╕Зр╕кр╣Ир╕зр╕Щр╕Хр╕▒р╕зр╕кр╕│р╕лр╕гр╕▒р╕Ъ Platinum р╣Бр╕ер╕░ Diamond

### Frontend:
- `frontend/src/components/ChatRoomList.jsx` - р╣Ар╕Юр╕┤р╣Ир╕бр╕Бр╕▓р╕гр╣Бр╕кр╕Фр╕Зр╕Др╕Щр╕нр╕нр╕Щр╣Др╕ер╕Щр╣Мр╣Гр╕Щр╕гр╕▓р╕вр╕Бр╕▓р╕гр╕лр╣Йр╕нр╕Зр╣Бр╕Кр╕Ч

## ЁЯОЙ р╕кр╕гр╕╕р╕Ы

р╕Бр╕▓р╕гр╣Бр╕Бр╣Йр╣Др╕Вр╕Щр╕╡р╣Йр╕Чр╕│р╣Гр╕лр╣Й:
- **Platinum р╣Бр╕ер╕░ Diamond** р╕бр╕╡р╕кр╕┤р╕Чр╕Шр╕┤р╣Мр╕Юр╕┤р╣Ар╕ир╕йр╣Гр╕Щр╕Бр╕▓р╕гр╕кр╕гр╣Йр╕▓р╕Зр╕лр╣Йр╕нр╕Зр╣Бр╕Кр╕Чр╕кр╣Ир╕зр╕Щр╕Хр╕▒р╕зр╣Др╕бр╣Ир╕Ир╕│р╕Бр╕▒р╕Фр╕Др╕Щ
- **р╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╕Чр╕▒р╣Ир╕зр╣Др╕Ы** р╣Ар╕лр╣Зр╕Щр╕Ир╕│р╕Щр╕зр╕Щр╕Др╕Щр╕нр╕нр╕Щр╣Др╕ер╕Щр╣Мр╣Гр╕Щр╣Бр╕Хр╣Ир╕ер╕░р╕лр╣Йр╕нр╕Зр╣Бр╕Кр╕Чр╣Бр╕Ър╕Ъ Real-time
- **UI р╕Чр╕╡р╣Ир╕кр╕зр╕вр╕Зр╕▓р╕б** р╕Фр╣Йр╕зр╕вр╕кр╕╡р╣Ар╕Вр╕╡р╕вр╕зр╕Чр╕╡р╣Ир╕Хр╕▒р╕Фр╕Бр╕▒р╕Ър╕Юр╕╖р╣Йр╕Щр╕лр╕ер╕▒р╕Зр╣Бр╕ер╕░ animation р╕Чр╕╡р╣Ир╕Щр╣Ир╕▓р╕кр╕Щр╣Гр╕И
- **р╕гр╕░р╕Ър╕Ър╕кр╕┤р╕Чр╕Шр╕┤р╣Мр╕Чр╕╡р╣Ир╕Кр╕▒р╕Фр╣Ар╕Ир╕Щ** р╕гр╕░р╕лр╕зр╣Ир╕▓р╕З tier р╕Хр╣Ир╕▓р╕Зр╣Ж

---

**ЁЯОЙ р╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╣Ар╕кр╕гр╣Зр╕Ир╕кр╕бр╕Ър╕╣р╕гр╕Ур╣Мр╣Бр╕ер╣Йр╕з!**
