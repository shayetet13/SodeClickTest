import{aD as g}from"./vendor-BIYVlVe0.js";const f="https://sodeclicktest-back-production.up.railway.app",u=g.create({baseURL:f,timeout:1e4,headers:{"Content-Type":"application/json"}});u.interceptors.request.use(e=>{const t=sessionStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>(console.error("‚ùå Request Error:",e),Promise.reject(e)));u.interceptors.response.use(e=>e,e=>{if(e.response){const{status:t,data:o}=e.response;t===401?(sessionStorage.removeItem("token"),window.location.href="/login"):t===403?console.error("‚ùå Access Denied"):t>=500&&console.error("‚ùå Server Error:",o?.message||"Internal Server Error"),console.error("‚ùå API Error:",{status:t,message:o?.message||e.message,url:e.config?.url})}else e.request?console.error("‚ùå Network Error:",e.message):console.error("‚ùå Error:",e.message);return Promise.reject(e)});const l={get:(e,t={})=>u.get(e,t),post:(e,t={},o={})=>u.post(e,t,o),put:(e,t={},o={})=>u.put(e,t,o),delete:(e,t={})=>u.delete(e,t),patch:(e,t={},o={})=>u.patch(e,t,o)},h={getPlans:()=>l.get("/api/membership/plans"),getUserMembership:e=>l.get(`/api/membership/user/${e}`),upgradeMembership:e=>l.post("/api/upgrade-simple",e),claimDailyBonus:e=>l.post("/api/membership/daily-bonus",{userId:e}),spinWheel:e=>l.post("/api/membership/spin-wheel",{userId:e}),transferCoins:(e,t,o)=>l.post("/api/membership/transfer-coins",{fromUserId:e,toUserId:t,amount:o}),checkAction:(e,t)=>l.get(`/api/membership/check-action/${e}/${t}`)},y={getTierName:e=>({member:"‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å",test:"Test Member",silver:"Silver Member",gold:"Gold Member",vip:"VIP Member",vip1:"VIP 1",vip2:"VIP 2",diamond:"Diamond Member",platinum:"Platinum Member"})[e]||e,getTierColor:e=>({member:"text-slate-600",test:"text-emerald-500",silver:"text-slate-500",gold:"text-yellow-500",vip:"text-purple-500",vip1:"text-pink-500",vip2:"text-amber-500",diamond:"text-cyan-500",platinum:"text-indigo-500"})[e]||"text-gray-500",getTierGradient:e=>({member:"from-slate-400 to-slate-600",test:"from-emerald-400 to-green-600",silver:"from-slate-300 to-slate-500",gold:"from-yellow-400 to-yellow-600",vip:"from-purple-400 to-purple-600",vip1:"from-pink-400 to-purple-600",vip2:"from-amber-400 to-orange-600",diamond:"from-cyan-400 to-blue-600",platinum:"from-indigo-400 to-purple-600"})[e]||"from-gray-400 to-gray-600",getTierIcon:e=>({member:"üë§",test:"üß™",silver:"ü•à",gold:"ü•á",vip:"üëë",vip1:"üíé",vip2:"‚≠ê",diamond:"üíé",platinum:"üèÜ"})[e]||"üë§",formatPrice:(e,t="THB")=>e===0?"‡∏ü‡∏£‡∏µ":new Intl.NumberFormat("th-TH",{style:"currency",currency:t}).format(e),formatCoins:e=>e>=1e6?`${(e/1e6).toFixed(1)}M`:e>=1e3?`${(e/1e3).toFixed(1)}K`:e.toLocaleString(),getTimeRemaining:(e,t="member")=>{if(!e)return t==="member"?"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏":"‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡πÅ‡∏•‡πâ‡∏ß";const o=new Date,s=new Date(e)-o;if(s<=0)return"‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡πÅ‡∏•‡πâ‡∏ß";const a=Math.floor(s/(1e3*60*60*24)),i=Math.floor(s%(1e3*60*60*24)/(1e3*60*60)),n=Math.floor(s%(1e3*60*60)/(1e3*60));return a>0?`‡πÄ‡∏´‡∏•‡∏∑‡∏≠ ${a} ‡∏ß‡∏±‡∏ô ${i} ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á`:i>0?`‡πÄ‡∏´‡∏•‡∏∑‡∏≠ ${i} ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á ${n} ‡∏ô‡∏≤‡∏ó‡∏µ`:n>0?`‡πÄ‡∏´‡∏•‡∏∑‡∏≠ ${n} ‡∏ô‡∏≤‡∏ó‡∏µ`:`‡πÄ‡∏´‡∏•‡∏∑‡∏≠ ${Math.floor(s%(1e3*60)/1e3)} ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ`},getTimeRemainingDetailed:(e,t="member")=>{if(!e)return t==="member"?{text:"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏",isExpired:!1}:{text:"‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡πÅ‡∏•‡πâ‡∏ß",isExpired:!0};const o=new Date,s=new Date(e)-o;if(s<=0)return{text:"‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡πÅ‡∏•‡πâ‡∏ß",isExpired:!0};const a=Math.floor(s/(1e3*60*60*24)),i=Math.floor(s%(1e3*60*60*24)/(1e3*60*60)),n=Math.floor(s%(1e3*60*60)/(1e3*60)),c=Math.floor(s%(1e3*60)/1e3);let p="";return a>0?p=`‡πÄ‡∏´‡∏•‡∏∑‡∏≠ ${a} ‡∏ß‡∏±‡∏ô ${i} ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á`:i>0?p=`‡πÄ‡∏´‡∏•‡∏∑‡∏≠ ${i} ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á ${n} ‡∏ô‡∏≤‡∏ó‡∏µ`:n>0?p=`‡πÄ‡∏´‡∏•‡∏∑‡∏≠ ${n} ‡∏ô‡∏≤‡∏ó‡∏µ ${c} ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ`:p=`‡πÄ‡∏´‡∏•‡∏∑‡∏≠ ${c} ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ`,{text:p,isExpired:!1,diff:s}},getMembershipDuration:(e,t=!1)=>t?"‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡πÅ‡∏•‡πâ‡∏ß":{member:"365 ‡∏ß‡∏±‡∏ô (‡∏ü‡∏£‡∏µ)",test:"1 ‡∏ß‡∏±‡∏ô",silver:"7 ‡∏ß‡∏±‡∏ô",gold:"15 ‡∏ß‡∏±‡∏ô",vip:"30 ‡∏ß‡∏±‡∏ô (1 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô)",vip1:"30 ‡∏ß‡∏±‡∏ô (1 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô)",vip2:"30 ‡∏ß‡∏±‡∏ô (1 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô)",diamond:"30 ‡∏ß‡∏±‡∏ô (1 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô)",platinum:"30 ‡∏ß‡∏±‡∏ô (1 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô)"}[e]||"‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏",hasFeature:(e,t)=>({member:[],silver:[],gold:["profileVideo","verificationBadge","specialFrame"],vip:["profileVideo","verificationBadge","specialFrame","pinPosts","blurImages","createChatRooms"],vip1:["profileVideo","verificationBadge","specialFrame","pinPosts","blurImages","createChatRooms","hideOnlineStatus"],vip2:["profileVideo","verificationBadge","specialFrame","pinPosts","blurImages","createChatRooms","hideOnlineStatus","unlimitedMedia"],diamond:["profileVideo","verificationBadge","specialFrame","pinPosts","blurImages","createChatRooms","hideOnlineStatus","unlimitedMedia","transferCoins"],platinum:["profileVideo","verificationBadge","specialFrame","pinPosts","blurImages","createChatRooms","hideOnlineStatus","unlimitedMedia","transferCoins","unlimited"]})[e]?.includes(t)||!1},S=Object.freeze(Object.defineProperty({__proto__:null,membershipAPI:h,membershipHelpers:y},Symbol.toStringTag,{value:"Module"})),w={generateQRCode:e=>l.post("/api/payment/generate-qr",e),checkPaymentStatus:e=>l.get(`/api/payment/check-payment/${e}`),confirmPayment:e=>l.post("/api/payment/confirm-payment",e),getBanks:()=>l.get("/api/payment/banks")},P={formatTimeRemaining:e=>{if(e<=0)return"‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡πÅ‡∏•‡πâ‡∏ß";const t=Math.floor(e/6e4),o=Math.floor(e%6e4/1e3);return`${t}:${o.toString().padStart(2,"0")}`},isQRCodeExpired:e=>e?new Date>new Date(e):!1,generatePaymentInfo:(e,t)=>`
‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£: ${t}
‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ç‡∏ä‡∏µ: ${e.accountNumber}
‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ç‡∏ä‡∏µ: ${e.accountName}
‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô: ${e.amount.toLocaleString("th-TH",{style:"currency",currency:"THB"})}
‡∏£‡∏´‡∏±‡∏™‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á: ${e.transactionId}
‡πÅ‡∏û‡πá‡∏Å‡πÄ‡∏Å‡∏à: ${e.planName}
    `.trim(),createQRPayload:(e,t,o)=>({bankId:t,amount:e.price.amount,planId:e._id,planTier:e.tier,planName:e.name,userId:o}),pollPaymentStatus:async(e,t,o,r)=>{let a=0;const i=async()=>{try{const n=await w.checkPaymentStatus(e);if(n.data.success){const c=n.data.data.status,p=n.data.data.isExpired;if(t&&t(c,n.data.data),c==="completed"){o&&o(n.data.data);return}if(c==="expired"||p){r&&r("QR Code ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡πÅ‡∏•‡πâ‡∏ß");return}a<60?(a++,setTimeout(i,5e3)):r&&r("‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô")}}catch(n){console.error("Error polling payment status:",n),r&&r("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô")}};i()},createQRCodeImage:(e,t={})=>{const r={...{width:300,margin:2,color:{dark:"#000000",light:"#FFFFFF"}},...t};return`data:image/svg+xml;base64,${btoa(`
      <svg xmlns="http://www.w3.org/2000/svg" width="${r.width}" height="${r.width}" viewBox="0 0 ${r.width} ${r.width}">
        <rect width="${r.width}" height="${r.width}" fill="${r.color.light}"/>
        <text x="${r.width/2}" y="${r.width/2}" text-anchor="middle" dy=".3em" font-family="monospace" font-size="12" fill="${r.color.dark}">QR Code</text>
        <text x="${r.width/2}" y="${r.width/2+20}" text-anchor="middle" dy=".3em" font-family="monospace" font-size="8" fill="${r.color.dark}">${e.substring(0,20)}...</text>
      </svg>
    `)}`},validatePaymentData:e=>{const t=[];return e.bankId||t.push("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£"),(!e.amount||e.amount<=0)&&t.push("‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á"),e.planId||t.push("‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏û‡πá‡∏Å‡πÄ‡∏Å‡∏à"),e.userId||t.push("‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ"),{isValid:t.length===0,errors:t}},getStatusMessage:e=>({pending:"‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô",completed:"‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",expired:"QR Code ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡πÅ‡∏•‡πâ‡∏ß",failed:"‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß",cancelled:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô"})[e]||"‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö",getStatusColor:e=>({pending:"text-yellow-600",completed:"text-green-600",expired:"text-red-600",failed:"text-red-600",cancelled:"text-gray-600"})[e]||"text-gray-600",getStatusIcon:e=>({pending:"‚è≥",completed:"‚úÖ",expired:"‚è∞",failed:"‚ùå",cancelled:"üö´"})[e]||"‚ùì"},m={token:"UtKvHtno8LFfDtqisP+gO7n8srsXW+91Gzc7fU73JpTZJWSXrvvF8sHGCaUMDpXIIDfZQx8UmRaMRCrnnVYf6IwsHvYhxkuMW9XbFyrQ3wU+SN2zpBmd3WpK3iWIRWT/zZ2NHJic5iB1xjcLlkbFHd5ZvMI=",publicKey:"Q3tyqDhLpeBJbR6oVRtOlDOcs670w4sg",secretKey:"3BM4eKl05N8pxq68eYYQvdIBgfrn3X8W",apiUrl:"https://api.feelfreepay.com/v1",testURL:"https://api-test.feelfreepay.com/ffp/gateway/qrcode",productionURL:"https://api.feelfreepay.com/ffp/gateway/qrcode",statusURL:"https://api.feelfreepay.com/v1/check_status_txn",webhookUrl:"/api/payment/feelfreepay-webhook"},b={createPayment:async e=>{try{const t=await l.post("/api/payment/feelfreepay/create",e);if(t.data.resultCode!=="00")throw new Error(t.data.message||"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô");return t.data}catch(t){throw console.error("FeelFreePay createPayment error:",t),t}},checkPaymentStatus:async e=>{try{const t=await l.post(`/api/payment/feelfreepay/status/${e}`);if(t.data.resultCode!=="00")throw new Error(t.data.message||"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞");return t.data}catch(t){throw console.error("FeelFreePay checkPaymentStatus error:",t),t}},cancelPayment:async e=>{try{const t=await l.post(`/api/payment/feelfreepay/cancel/${e}`);if(t.data.resultCode!=="00")throw new Error(t.data.message||"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô");return t.data}catch(t){throw console.error("FeelFreePay cancelPayment error:",t),t}},getSupportedBanks:async()=>{try{const e=await l.get("/api/payment/feelfreepay/banks");if(e.data.resultCode!=="00")throw new Error(e.data.message||"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£");return e.data}catch(e){throw console.error("FeelFreePay getSupportedBanks error:",e),e}},getPaymentHistory:async(e,t=1,o=10)=>{try{const r=await l.post("/api/payment/feelfreepay/history",{userId:e,page:t,limit:o});if(r.data.resultCode!=="00")throw new Error(r.data.message||"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡∏∂‡∏á‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô");return r.data}catch(r){throw console.error("FeelFreePay getPaymentHistory error:",r),r}}},d={generateReferenceId:()=>{const e=new Date,t=e.getFullYear().toString().slice(-2),o=(e.getMonth()+1).toString().padStart(2,"0"),r=e.getDate().toString().padStart(2,"0"),s=e.getHours().toString().padStart(2,"0"),a=e.getMinutes().toString().padStart(2,"0"),i=e.getSeconds().toString().padStart(2,"0"),n=Math.floor(Math.random()*1e3).toString().padStart(3,"0");return`${t}${o}${r}${s}${a}${i}${n}`.slice(0,15)},createPaymentData:(e,t)=>({amount:e.price.amount,currencyCode:"764",paymentType:"Q",detail:`‡∏≠‡∏±‡∏õ‡πÄ‡∏Å‡∏£‡∏î‡πÄ‡∏õ‡πá‡∏ô ${e.name} - ${e.tier}`,customerName:t.name||"Customer",customerEmail:t.email||"customer@example.com",customerTelephone:t.phone||"0800000000",customerAddress:t.address||"Bangkok, Thailand",merchantDefined1:e._id,merchantDefined2:e.tier,merchantDefined3:t.userId,merchantDefined4:e.name,merchantDefined5:new Date().toISOString(),referenceNo:d.generateReferenceId()}),debugLog:(e,t="info",o=null)=>{const r=new Date().toLocaleTimeString("th-TH",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"});console[t==="error"?"error":t==="warning"?"warn":"log"](`[${r}] [FeelFreePay] ${e}`,o||"")},createQRCodeDirect:async(e,t="test")=>{const o=t==="test"?m.testURL:m.productionURL;try{d.debugLog("Creating QR Code direct","info",{apiURL:o,paymentData:e});const r=new FormData;r.append("token",m.token),r.append("referenceNo",e.referenceNo||d.generateReferenceId()),r.append("amount",e.amount),r.append("detail",e.detail||"Payment"),r.append("customerName",e.customerName||""),r.append("customerEmail",e.customerEmail||"");const s=await fetch(o,{method:"POST",body:r});if(!s.ok)throw new Error(`API Error: ${s.status} - ${s.statusText}`);const a=await s.blob(),i=URL.createObjectURL(a);return d.debugLog("QR Code created successfully","success"),{success:!0,qrData:i,referenceNo:e.referenceNo,amount:e.amount}}catch(r){throw d.debugLog("Failed to create QR Code","error",r),r}},checkStatusDirect:async e=>{try{const t=`${m.secretKey}:`,o=btoa(t),r=await fetch(m.statusURL,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Basic ${o}`},body:JSON.stringify({referenceNo:e})});if(!r.ok)throw new Error(`Status API Error: ${r.status}`);const s=await r.json();return s.resultCode==="00"?Array.isArray(s.txn)?s.txn[s.txn.length-1].status==="S"?"success":"pending":s.txn&&s.txn.status==="S"?"success":"pending":"failed"}catch(t){throw d.debugLog("Status check failed","error",t),t}},pollPaymentStatus:async(e,t,o,r)=>{let a=0;const i=async()=>{try{const n=await b.checkPaymentStatus(e),c=Array.isArray(n.txn)?n.txn[0]:n.txn,p=c.status;if(t&&t(p,c),p==="S"){o&&o(c);return}if(p==="D"){r&&r("‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏ñ‡∏π‡∏Å‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò");return}a<60?(a++,setTimeout(i,5e3)):r&&r("‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô")}catch(n){console.error("Error polling FeelFreePay payment status:",n),r&&r("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô")}};i()},getStatusMessage:e=>({G:"‡∏™‡∏£‡πâ‡∏≤‡∏á QR Code ‡πÅ‡∏•‡πâ‡∏ß",A:"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•",S:"‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",D:"‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏ñ‡∏π‡∏Å‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò"})[e]||"‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö",getStatusColor:e=>({G:"text-blue-600",A:"text-yellow-600",S:"text-green-600",D:"text-red-600"})[e]||"text-gray-600",getStatusIcon:e=>({G:"‚è≥",A:"‚öôÔ∏è",S:"‚úÖ",D:"‚ùå"})[e]||"‚ùì",validatePaymentData:e=>{const t=[];return(!e.amount||e.amount<=0)&&t.push("‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á"),e.currencyCode||t.push("‡∏£‡∏´‡∏±‡∏™‡∏™‡∏Å‡∏∏‡∏•‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á"),e.paymentType||t.push("‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á"),e.detail||t.push("‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á"),{isValid:t.length===0,errors:t}},getResultCodeMessage:e=>({"00":"‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à","01":"‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡∏≤‡∏î‡∏´‡∏≤‡∏¢‡πÑ‡∏õ","02":"‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á",58:"‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°‡πÑ‡∏°‡πà‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏Å‡∏±‡∏ö‡πÄ‡∏ó‡∏≠‡∏£‡πå‡∏°‡∏¥‡∏ô‡∏±‡∏•‡∏ô‡∏µ‡πâ",90:"‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô",91:"‡∏£‡∏∞‡∏ö‡∏ö‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡∏≠‡∏≠‡∏Å‡∏ö‡∏±‡∏ï‡∏£‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏ß‡∏¥‡∏ï‡∏ä‡πå‡πÑ‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô",94:"‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ã‡πâ‡∏≥",96:"‡∏£‡∏∞‡∏ö‡∏ö‡∏Ç‡∏±‡∏î‡∏Ç‡πâ‡∏≠‡∏á",xx:"‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤"})[e]||"‡∏£‡∏´‡∏±‡∏™‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö"};class ${constructor(){this.baseURL=`${f}/api/profile`}getAuthHeaders(){const t=sessionStorage.getItem("token");if(!t)throw console.error("No token found in sessionStorage"),new Error("Authentication token not found");return{"Content-Type":"application/json",Authorization:`Bearer ${t}`}}async getUserProfile(t){try{const o=sessionStorage.getItem("token"),r={"Content-Type":"application/json"};o&&(r.Authorization=`Bearer ${o}`);const s=await fetch(`${this.baseURL}/${t}`,{method:"GET",headers:r});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return await s.json()}catch(o){throw console.error("Error fetching user profile:",o),o}}async updateUserProfile(t,o){try{console.log("ProfileAPI: Sending data to backend:",o);const r=sessionStorage.getItem("token");if(!r)throw new Error("Authentication token not found. Please login again.");const s=await fetch(`${this.baseURL}/${t}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify(o)}),a=await s.json();if(!s.ok){if(console.error("ProfileAPI: Backend error response:",a),s.status===401)throw sessionStorage.removeItem("token"),sessionStorage.removeItem("user"),new Error("Session expired. Please login again.");if(s.status===403)throw sessionStorage.removeItem("token"),sessionStorage.removeItem("user"),new Error("Token ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏´‡∏°‡πà");if(a.errors&&a.errors.length>0){console.error("ProfileAPI: Validation errors:",a.errors);const i=a.errors.map(n=>`${n.field}: ${n.message}`).join(", ");throw new Error(`Validation error: ${i}`)}throw new Error(a.message||`HTTP error! status: ${s.status}`)}return console.log("ProfileAPI: Success response:",a),a}catch(r){throw console.error("Error updating user profile:",r),r}}async uploadProfileImage(t,o){try{const r=new FormData;r.append("profileImage",o);const s=sessionStorage.getItem("token"),a=await fetch(`${this.baseURL}/${t}/upload-image`,{method:"POST",headers:{Authorization:`Bearer ${s}`},body:r});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return await a.json()}catch(r){throw console.error("Error uploading profile image:",r),r}}async deleteProfileImage(t,o){try{const r=sessionStorage.getItem("token"),s=await fetch(`${this.baseURL}/${t}/image/${o}`,{method:"DELETE",headers:{Authorization:`Bearer ${r}`}});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return await s.json()}catch(r){throw console.error("Error deleting profile image:",r),r}}async getCompatibility(t,o){try{const r=await fetch(`${this.baseURL}/${t}/compatibility/${o}`,{method:"GET",headers:this.getAuthHeaders()});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return await r.json()}catch(r){throw console.error("Error getting compatibility:",r),r}}async searchProfiles(t={}){try{const o=new URLSearchParams;Object.keys(t).forEach(s=>{t[s]!==void 0&&t[s]!==null&&t[s]!==""&&(typeof t[s]=="object"?o.append(s,JSON.stringify(t[s])):o.append(s,t[s]))});const r=await fetch(`${this.baseURL}/search?${o.toString()}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return await r.json()}catch(o){throw console.error("Error searching profiles:",o),o}}}const v={calculateAge(e){if(!e)return null;const t=new Date,o=new Date(e);let r=t.getFullYear()-o.getFullYear();const s=t.getMonth()-o.getMonth();return(s<0||s===0&&t.getDate()<o.getDate())&&r--,r},getEducationLabel(e){return{high_school:"‡∏°‡∏±‡∏ò‡∏¢‡∏°‡∏®‡∏∂‡∏Å‡∏©‡∏≤",diploma:"‡∏õ‡∏ß‡∏™./‡∏≠‡∏ô‡∏∏‡∏õ‡∏£‡∏¥‡∏ç‡∏ç‡∏≤",bachelor:"‡∏õ‡∏£‡∏¥‡∏ç‡∏ç‡∏≤‡∏ï‡∏£‡∏µ",master:"‡∏õ‡∏£‡∏¥‡∏ç‡∏ç‡∏≤‡πÇ‡∏ó",doctorate:"‡∏õ‡∏£‡∏¥‡∏ç‡∏ç‡∏≤‡πÄ‡∏≠‡∏Å",other:"‡∏≠‡∏∑‡πà‡∏ô‡πÜ"}[e]||e},getReligionLabel(e){return{buddhist:"‡∏û‡∏∏‡∏ó‡∏ò",christian:"‡∏Ñ‡∏£‡∏¥‡∏™‡∏ï‡πå",muslim:"‡∏≠‡∏¥‡∏™‡∏•‡∏≤‡∏°",hindu:"‡∏Æ‡∏¥‡∏ô‡∏î‡∏π",other:"‡∏≠‡∏∑‡πà‡∏ô‡πÜ",none:"‡πÑ‡∏°‡πà‡∏ô‡∏±‡∏ö‡∏ñ‡∏∑‡∏≠"}[e]||e},getLanguageLabel(e){return{thai:"‡πÑ‡∏ó‡∏¢",english:"‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©",chinese:"‡∏à‡∏µ‡∏ô",japanese:"‡∏ç‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏ô",korean:"‡πÄ‡∏Å‡∏≤‡∏´‡∏•‡∏µ",french:"‡∏ù‡∏£‡∏±‡πà‡∏á‡πÄ‡∏®‡∏™",german:"‡πÄ‡∏¢‡∏≠‡∏£‡∏°‡∏±‡∏ô",spanish:"‡∏™‡πÄ‡∏õ‡∏ô",other:"‡∏≠‡∏∑‡πà‡∏ô‡πÜ"}[e]||e},getLifestyleLabel(e,t){return{smoking:{never:"‡πÑ‡∏°‡πà‡∏™‡∏π‡∏ö",occasionally:"‡∏ö‡∏≤‡∏á‡∏Ñ‡∏£‡∏±‡πâ‡∏á",regularly:"‡∏™‡∏π‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥",trying_to_quit:"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏•‡∏¥‡∏Å"},drinking:{never:"‡πÑ‡∏°‡πà‡∏î‡∏∑‡πà‡∏°",occasionally:"‡∏ö‡∏≤‡∏á‡∏Ñ‡∏£‡∏±‡πâ‡∏á",socially:"‡∏î‡∏∑‡πà‡∏°‡∏™‡∏±‡∏á‡∏Ñ‡∏°",regularly:"‡∏î‡∏∑‡πà‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥"},exercise:{never:"‡πÑ‡∏°‡πà‡πÄ‡∏•‡πà‡∏ô",rarely:"‡∏ô‡∏≤‡∏ô‡πÜ ‡∏Ñ‡∏£‡∏±‡πâ‡∏á",sometimes:"‡∏ö‡∏≤‡∏á‡∏Ñ‡∏£‡∏±‡πâ‡∏á",regularly:"‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥",daily:"‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô"},diet:{omnivore:"‡∏Å‡∏¥‡∏ô‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á",vegetarian:"‡∏°‡∏±‡∏á‡∏™‡∏ß‡∏¥‡∏£‡∏±‡∏ï‡∏¥",vegan:"‡∏ß‡∏µ‡πÅ‡∏Å‡∏ô",pescatarian:"‡∏Å‡∏¥‡∏ô‡∏õ‡∏•‡∏≤",keto:"‡∏Ñ‡∏µ‡πÇ‡∏ï",other:"‡∏≠‡∏∑‡πà‡∏ô‡πÜ"},sleepSchedule:{early_bird:"‡∏ô‡∏≠‡∏ô‡πÄ‡∏ä‡πâ‡∏≤ ‡∏ï‡∏∑‡πà‡∏ô‡πÄ‡∏ä‡πâ‡∏≤",night_owl:"‡∏ô‡∏≠‡∏ô‡∏î‡∏∂‡∏Å ‡∏ï‡∏∑‡πà‡∏ô‡∏™‡∏≤‡∏¢",flexible:"‡∏¢‡∏∑‡∏î‡∏´‡∏¢‡∏∏‡πà‡∏ô"},travel:{love_travel:"‡∏£‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á",occasional_travel:"‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡∏ö‡∏≤‡∏á‡∏Ñ‡∏£‡∏±‡πâ‡∏á",prefer_home:"‡∏ä‡∏≠‡∏ö‡∏≠‡∏¢‡∏π‡πà‡∏ö‡πâ‡∏≤‡∏ô",business_travel:"‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à"},children:{have_children:"‡∏°‡∏µ‡∏•‡∏π‡∏Å‡πÅ‡∏•‡πâ‡∏ß",want_children:"‡∏≠‡∏¢‡∏≤‡∏Å‡∏°‡∏µ‡∏•‡∏π‡∏Å",dont_want_children:"‡πÑ‡∏°‡πà‡∏≠‡∏¢‡∏≤‡∏Å‡∏°‡∏µ‡∏•‡∏π‡∏Å",open_to_children:"‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏à"}}[e]?.[t]||t},getInterestLabel(e){return{sports:"‡∏Å‡∏µ‡∏¨‡∏≤",music:"‡∏î‡∏ô‡∏ï‡∏£‡∏µ",movies:"‡∏´‡∏ô‡∏±‡∏á/‡∏ã‡∏µ‡∏£‡∏µ‡∏™‡πå",books:"‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠",cooking:"‡∏ó‡∏≥‡∏≠‡∏≤‡∏´‡∏≤‡∏£",travel:"‡∏ó‡πà‡∏≠‡∏á‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß",technology:"‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ",art:"‡∏®‡∏¥‡∏•‡∏õ‡∏∞",gaming:"‡πÄ‡∏Å‡∏°",fitness:"‡∏ü‡∏¥‡∏ï‡πÄ‡∏ô‡∏™",nature:"‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥",photography:"‡∏ñ‡πà‡∏≤‡∏¢‡∏†‡∏≤‡∏û",dancing:"‡πÄ‡∏ï‡πâ‡∏ô‡∏£‡∏≥",other:"‡∏≠‡∏∑‡πà‡∏ô‡πÜ"}[e]||e},getPromptQuestionLabel(e){return{my_special_talent:"‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô‡∏Ñ‡∏∑‡∏≠...",way_to_win_my_heart:"‡∏ß‡∏¥‡∏ò‡∏µ‡∏ä‡∏ô‡∏∞‡πÉ‡∏à‡∏â‡∏±‡∏ô‡∏Ñ‡∏∑‡∏≠...",dream_destination:"‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ô‡∏ù‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏≤‡∏Å‡πÑ‡∏õ‡∏Ñ‡∏∑‡∏≠...",last_laugh_until_tears:"‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏´‡∏±‡∏ß‡πÄ‡∏£‡∏≤‡∏∞‡∏à‡∏ô‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡πÑ‡∏´‡∏•‡∏Ñ‡∏∑‡∏≠...",perfect_first_date:"‡πÄ‡∏î‡∏ó‡πÅ‡∏£‡∏Å‡πÉ‡∏ô‡∏ù‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô‡∏Ñ‡∏∑‡∏≠...",life_motto:"‡∏Ñ‡∏ï‡∏¥‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÉ‡∏à‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô‡∏Ñ‡∏∑‡∏≠...",favorite_memory:"‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏£‡∏á‡∏à‡∏≥‡∏ó‡∏µ‡πà‡∏ä‡∏∑‡πà‡∏ô‡∏ä‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏Ñ‡∏∑‡∏≠...",biggest_fear:"‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏Å‡∏•‡∏±‡∏ß‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏Ñ‡∏∑‡∏≠...",dream_job:"‡∏á‡∏≤‡∏ô‡πÉ‡∏ô‡∏ù‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô‡∏Ñ‡∏∑‡∏≠...",guilty_pleasure:"‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡∏¥‡∏î‡∏ó‡∏µ‡πà‡∏ä‡∏≠‡∏ö‡∏ó‡∏≥‡∏Ñ‡∏∑‡∏≠..."}[e]||e},getProfileCompleteness(e){const t=["bio","occupation.job","education.level","physicalAttributes.height","religion","languages","lifestyle.smoking","lifestyle.drinking","lifestyle.exercise","interests","promptAnswers"];let o=0;const r=t.length;return t.forEach(s=>{const a=s.split(".");let i=e;for(const n of a)i=i?.[n];i!=null&&i!==""&&(!Array.isArray(i)||i.length>0)&&o++}),Math.round(o/r*100)},getProfileImageUrl(e){return e?`${f.replace("/api","")}/uploads/profiles/${e}`:null},getCompatibilityLevel(e){return e>=80?{level:"excellent",label:"‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏±‡∏ô‡πÑ‡∏î‡πâ‡∏°‡∏≤‡∏Å",color:"text-green-600"}:e>=60?{level:"good",label:"‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏±‡∏ô‡πÑ‡∏î‡πâ‡∏î‡∏µ",color:"text-blue-600"}:e>=40?{level:"fair",label:"‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏±‡∏ô‡πÑ‡∏î‡πâ‡∏û‡∏≠‡πÉ‡∏ä‡πâ",color:"text-yellow-600"}:{level:"low",label:"‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏±‡∏ô‡πÑ‡∏î‡πâ‡∏ô‡πâ‡∏≠‡∏¢",color:"text-red-600"}}},k=new $;export{y as a,b,v as c,k as d,S as e,d as f,h as m,P as p};
